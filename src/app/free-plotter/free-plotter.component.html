
<div class="main-content">
	<div class="container-fluid">
		<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>
		<div class="row">
			<h4 class="row-title">Graficador Libre</h4>
		</div>
		<div class="row">
			<div class="col-md-2" style="display: table; height: 45px;">
				<span style="display: table-cell; vertical-align: middle;">Campo</span>
			</div>
			<mat-form-field class="col-md-4 mat-select-custom" floatLabel="never">
				<mat-label>{{farmSelected?farmSelected.name:'Seleccionar campo'}}</mat-label>
				<mat-select>
					<mat-option *ngFor="let farm of farms" (click)="onSelect('farm',farm.id)">{{farm.name}}</mat-option>
				</mat-select>
			</mat-form-field>
			<div class="col-md-2" style="display: table; height: 45px;">
				<span style="display: table-cell; vertical-align: middle;">Sector</span>
			</div>
			<mat-form-field class="col-md-4 mat-select-custom" floatLabel="never">
				<mat-label>{{zoneSelected?zoneSelected.name:'Seleccionar Sector'}}</mat-label>
				<mat-select>
					<mat-option  *ngFor="let zone of weatherZones" (click)="onSelect('zone',zone.id)">{{zone.name}}</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
		<div class="row">
			<div class="col-md-4">
				<div>
					<span>{{today | date:'MMMM dd/MM/yyyy'}} </span>
				</div>
			</div>
			<div class="col-md-8">
				<span *ngIf="dataFarm" class="title-farm">{{dataFarm.name}}</span>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12" >
				<div class="select-time">
					<h4>Selector de tiempo</h4>
					<form class="form-inline form-date-range line">
						<div class="form-group hidden">
							<div class="input-group">
								<input name="datepickerFrom"
								style="
								background-color: transparent;
								border: none;
								visibility: hidden;"
								ngbDatepicker
								#datepickerFrom="ngbDatepicker"
								[autoClose]="'outside'"
								(dateSelect)="onDateSelection($event,'from')"
								[displayMonths]="1"
								[dayTemplate]="t"
								outsideDays="hidden"
								[startDate]="fromDate">
								<ng-template #t let-date let-focused="focused">
									<span class="custom-day"
									[class.focused]="focused"
									[class.range]="isRange(date)"
									[class.faded]="isHovered(date) || isInside(date)"
									(mouseenter)="hoveredDate = date"
									(mouseleave)="hoveredDate = null">
									{{ date.day }}
								</span>
							</ng-template>
						</div>
					</div>
					<div class="form-group ">
						<h6>*Fecha de Inicio</h6>
						<div class="input-group">
							<input #dpFromDate
							class="input-calendar" 
							name="dpFromDate"
							[value]="formatter.format(fromDate)"
							(input)="fromDate = validateInput(fromDate, dpFromDate.value)">
							<div class="input-group-append">
								<button class="icon-calendar" (click)="datepickerFrom.toggle()" type="button">
									<img src="assets/icons/Calendar.svg" style="height: 25px">
								</button>
							</div>
						</div>
					</div>
					<div class="form-group hidden">
						<div class="input-group">
							<input name="datepickerTo"
							style="
							background-color: transparent;
							border: none;
							visibility: hidden;"
							ngbDatepicker
							#datepickerTo="ngbDatepicker"
							[autoClose]="'outside'"
							(dateSelect)="onDateSelection($event,'to')"
							[displayMonths]="1"
							[dayTemplate]="t"
							outsideDays="hidden"
							[startDate]="fromDate">
							<ng-template #t let-date let-focused="focused">
								<span class="custom-day"
								[class.focused]="focused"
								[class.range]="isRange(date)"
								[class.faded]="isHovered(date) || isInside(date)"
								(mouseenter)="hoveredDate = date"
								(mouseleave)="hoveredDate = null">
								{{ date.day }}
							</span>
						</ng-template>
					</div>
				</div>
				<div class="form-group">
					<h6>*Fecha Final</h6> 
					<div class="input-group">
						<input #dpToDate
						class="input-calendar"  
						name="dpToDate"
						[value]="formatter.format(toDate)"
						(input)="toDate = validateInput(toDate, dpToDate.value)">
						<div class="input-group-append">
							<button class="icon-calendar"  (click)="datepickerTo.toggle()" type="button">
								<img src="assets/icons/Calendar.svg" style="height: 25px">
							</button>
						</div>
					</div>
				</div>
				<div class="form-inline">
					<button class="btn-greem" [disabled]="requestChartBtn" (click)="requestDataChart()">Ver</button>
				</div>
			</form>
		</div>
		<div class="line">
			<div class="buttons-time row">
				<div >
					<button class="volver" (click)="goBack()" [disabled]="dateRangeHistory.length==1">Volver</button>
				</div>
				<div *ngFor="let data of times">
					<button [ngClass]="{'times-active': data.value === selectedValue}" (click)="selectTime(data)"  class="times">{{data.value}}</button>
				</div>
			</div>
		</div>
		<div class="container-fluid top">
			<div class="row ">
				<h4 class="row-subtitle-card">Temperatura/Humedad</h4>
			</div>
			<div class="card-body bg-white chard-size">
				<div class="flex" *ngIf="renderLineChartFlag">
					<div class="flex-item">
						<div style="display: block;">
							<canvas baseChart width="400" height="200"
							[datasets]="lineChartData"
							[labels]="lineChartLabels"
							[options]="lineChartOptions"
							[colors]="lineChartColors"
							[legend]="lineChartLegend"
							[chartType]="lineChartType"
							[plugins]="lineChartPlugins"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container-fluid top">
			<div class="row ">
				<h4 class="row-subtitle-card">Rainfall+Et0</h4>
			</div>
			<div class="card-body bg-white chard-size">
				<div  *ngIf="renderBarChartFlag">
					<div style="display: block">
						<canvas baseChart width="400" height="200"
							[datasets]="barChartData"
							[labels]="barChartLabels"
							[options]="barChartOptions"
							[plugins]="barChartPlugins"
							[legend]="barChartLegend"
							[chartType]="barChartType">
						</canvas>
					</div>
				</div>
			</div>
	</div>
</div>
</div>
</div>
</div>